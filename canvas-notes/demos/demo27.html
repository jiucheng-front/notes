<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>使用Konva库绘制进度条</title>
    <style>
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
    </style>
</head>
<body>
<script src="src/konva.1.3.0.min.js"></script>
<div id="container"></div>
<script>
//1 创建舞台
var stage=new Konva.Stage({
    container:'container',
    width:window.innerWidth,
    height:window.innerHeight
});
//2 创建一个层
var layer=new Konva.Layer();
//3 把这个层添加到舞台上去
stage.add(layer);

// 中心点坐标
var cenX=stage.width()/2;//注意：使用Konva获取数据都是使用方法获取
var cenY=stage.height()/2;

var x=1/8*stage.width();
var y=cenY;
var height=1/12 *stage.height();
var maxWidth=3/4 *stage.width();
//4 绘制一个进度条
var innerRect=new Konva.Rect({
    x:x,
    y:y,
    width:100,
    height:height,
    opacity:.4,
    fill:'purple',
    cornerRadius:height/2, //角落
});

//5 把内部的矩形放到层里面去
layer.add(innerRect);

//6 绘制外圈矩形
var outRect=new Konva.Rect({
    x:x,
    y:y,
    width:maxWidth,
    height:height,
    stroke:'green',//描边颜色
    strokeWidth:3, //描边宽度
    cornerRadius:height/2
});

layer.add(outRect);

layer.draw();


//8 实际情况
// var imgIndex=0;
// var imgSrcArr=['01.png','02.png'];
// for(var i=0;i<imgSrcArr.length;i++){
//     var img=new Image();
//     img.src=imgSrcArr[i];
//     img.onload=function(){
//         imgIndex+=1;
//         innerRect.to({
//             width:maxWidth*(imgIndex/imgSrcArr.length),
//             duration:1.5,//动画执行1.5秒
//             opacity:.6,
//             easing:Konva.Easings.EaseInOut
//         });
//     }
// }



//7  Konva 的动画系统
innerRect.to({
    width:maxWidth,
    duration:1.5,//动画执行1.5秒
    opacity:.6,
    easing:Konva.Easings.EaseInOut
});
</script>
</body>
</html>